image: registry.gitlab.com/modioab/base-image:fedora-24-build-latest
before_script:
  - docker info

build-image:
  stage: build
  tags:
    - docker
    - x86_64
  script:
    - docker login -u gitlab-ci-token -p $CI_BUILD_TOKEN -e "autobuild@modio.se" registry.gitlab.com
    - make -C build all


zabbix-web:
  stage: build
  tags:
    - docker
    - x86_64
  script:
    - docker login -u gitlab-ci-token -p $CI_BUILD_TOKEN -e "autobuild@modio.se" registry.gitlab.com
    - make -C zabbix-web all


python3-image:
  stage: build
  tags:
    - docker
    - x86_64
  script:
    - docker login -u gitlab-ci-token -p $CI_BUILD_TOKEN -e "autobuild@modio.se" registry.gitlab.com
    - ./build-python-image.sh


debian-armv7:
  image: registry.gitlab.com/modioab/base-image:debian-armv7-bootstrap
  stage: build
  tags:
    - docker
    - arm
  script:
    - docker login -u gitlab-ci-token -p $CI_BUILD_TOKEN -e "autobuild@modio.se" registry.gitlab.com
    - make -C debian-armv7 all
